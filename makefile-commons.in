###############################################################################
# makefile-commons.in
# settings for the makefile of the odimh5_validator software
# v_0.0, 04.2018, L. Meri, SHMU
###############################################################################

##############################################################
#please edit the HOME_DIR, CC and CXX variables according your system
##############################################################
HOME_DIR = $(shell pwd)
CXX = g++ 

##############################################################
#it is possible to edit the compiler flags but not recommended
##############################################################
CXX_FLAGS += -std=c++11 -O2 -fopenmp -Wall -Wextra

##############################################################
#don`t edit anything below this unless you are sure of what you do
##############################################################
AR = ar
ARFLAGS = -rv
ARFLAGS_H5 = 

SRC_DIR = $(HOME_DIR)/src
OBJ_DIR = $(HOME_DIR)/obj
INC_DIR = $(HOME_DIR)/include
LIB_DIR = $(HOME_DIR)/lib
BIN_DIR = $(HOME_DIR)/bin

INC_FLAGS = -I$(INC_DIR) 
LIB_FLAGS = -L$(LIB_DIR) \
            -Wl,--start-group -lmyodimh5 \
            -lhdf5 -lpthread
LIB_FLAGS += $(shell h5cc -showconfig | \
                     grep "Extra libraries:" | \
                     awk -F':' '{print $$2}' ) 
LIB_FLAGS += -Wl,--end-group
            
 